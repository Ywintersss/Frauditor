<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frauditor</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container">
        <!-- Header -->
        <header class="popup-header">
            <div class="logo">
                <span class="logo-icon" aria-label="Malaysian flag">🇲🇾</span>
                <h1>Frauditor</h1>
                <span class="hackathon-badge">Team Fighting</span>
            </div>
            <div class="version">v1.0</div>
            <button id="themeToggle" class="theme-toggle" title="Toggle dark mode" aria-label="Toggle dark mode" tabindex="0">🌙</button>
        </header>

        <!-- Status -->
        <section class="status-section">
            <div class="status-card" id="statusCard">
                <div class="status-icon" id="statusIcon">⏳</div>
                <div class="status-content">
                    <div class="status-title" id="statusTitle">Checking Status...</div>
                    <div class="status-subtitle" id="statusSubtitle">Connecting to detection service</div>
                </div>
            </div>
        </section>

        <!-- Quick Analysis -->
        <section class="analysis-section">
            <h3>🔬 Quick Analysis</h3>
            <div class="input-group">
                <textarea 
                    id="reviewInput" 
                    placeholder="Paste a review here to analyze it instantly..."
                    rows="3"
                    maxlength="1000"
                ></textarea>
                <button id="analyzeBtn" class="analyze-btn">
                    <span class="btn-text">Analyze</span>
                    <span class="btn-loader" style="display: none;">⏳</span>
                </button>
            </div>
            <div id="analysisResult" class="analysis-result" style="display: none;"></div>
        </section>

        <!-- Statistics + Chart -->
        <section class="stats-section">
            <h3>📊 Session Stats</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="totalAnalyzed">0</div>
                    <div class="stat-label">Analyzed</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="fakeDetected">0</div>
                    <div class="stat-label">Fake</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="avgConfidence">0%</div>
                    <div class="stat-label">Avg Confidence</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="cacheHits">0</div>
                    <div class="stat-label">Cached</div>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="pieChart" width="120" height="120"></canvas>
            </div>
            <div class="chart-container">
                <canvas id="barChart" width="220" height="80"></canvas>
            </div>
        </section>

        <!-- Top Words Cloud -->
        <section class="wordcloud-section">
            <h3>☁️ Top Suspicious Words</h3>
            <div id="wordCloud" class="wordcloud"></div>
        </section>

        <!-- Recent History -->
        <section class="history-section">
            <h3>🕑 Recent Analyses</h3>
            <ul id="recentHistory" class="history-list"></ul>
        </section>

        <!-- Actions -->
        <section class="actions-section">
            <button id="clearCacheBtn" class="action-btn secondary" aria-label="Clear cache" tabindex="0">
                🗑️ Clear Cache
            </button>
            <button id="refreshStatsBtn" class="action-btn secondary" aria-label="Refresh stats" tabindex="0">
                🔄 Refresh Stats
            </button>
            <button id="shareResultBtn" class="action-btn" aria-label="Share result" tabindex="0">
                📤 Share Result
            </button>
            <button id="judgeModeBtn" class="action-btn" aria-label="Toggle Judge Mode" tabindex="0">
                👨‍⚖️ Judge Mode
            </button>
            <button id="gifExportBtn" class="action-btn" aria-label="Export GIF of dashboard" tabindex="0">
                🎬 Export GIF
            </button>
        </section>

        <!-- Confetti Animation -->
        <div id="confettiContainer" class="confetti-container"></div>

        <!-- Footer -->
        <footer class="popup-footer">
            <p>🇲🇾 Optimized for Malaysian e-commerce</p>
            <div class="footer-links">
                <a href="https://frauditor.onrender.com/api/docs" target="_blank">API Docs</a>
                <a href="https://github.com/Ywintersss/Frauditor" target="_blank">GitHub</a>
                <a href="#" id="helpLink">Help</a>
                <a href="#" id="feedbackLink">Feedback</a>
            </div>
        </footer>
    </div>
    <script src="popup.js"></script>
    <audio id="confettiSound" src="confetti.mp3" preload="auto" style="display:none"></audio>
</body>
</html>